<!doctype html><html lang=de class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.83.1">
<meta name=description content="CrowPi goes Java: An easy introduction to electronics programming">
<meta name=author content="Pascal Mathis, Tobias Siegrist">
<link rel=icon href=/CrowPiGoesJavaTutorial/images/favicon.png type=image/png>
<title>Ultraschall Distanzsensor :: CrowPi goes Java</title>
<link href=/CrowPiGoesJavaTutorial/css/nucleus.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/fontawesome-all.min.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/hybrid.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/featherlight.min.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/perfect-scrollbar.min.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/auto-complete.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/atom-one-dark-reasonable.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/theme.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/tabs.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/hugo-theme.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/theme-crowpi.css?1622398519 rel=stylesheet>
<link href=/CrowPiGoesJavaTutorial/css/custom.css?1622398519 rel=stylesheet>
<script src=/CrowPiGoesJavaTutorial/js/jquery-3.3.1.min.js?1622398519></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/CrowPiGoesJavaTutorial/de/components/ultrasonic-sensor/>
<nav id=sidebar class=showVisitedLinks>
<div id=header-wrapper>
<div id=header>
<a id=logo href=/CrowPiGoesJavaTutorial/de>
<img src=/CrowPiGoesJavaTutorial/images/fhnw-logo.svg style=width:40%;height:40%>
<h3 style=margin:0;color:#fff>CrowPi goes Java</h3>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Suchen...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/CrowPiGoesJavaTutorial/js/lunr.min.js?1622398519></script>
<script type=text/javascript src=/CrowPiGoesJavaTutorial/js/auto-complete.js?1622398519></script>
<script type=text/javascript>var baseurl="https://fhnw-ip5-ip6.github.io/CrowPiGoesJavaTutorial/de"</script>
<script type=text/javascript src=/CrowPiGoesJavaTutorial/js/search.js?1622398519></script>
</div>
<section id=homelinks>
<ul>
<li>
<a class=padding href=/CrowPiGoesJavaTutorial/de><i class="fas fa-fw fa-home"></i> Startseite</a>
</li>
</ul>
</section>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/setup/ title=Vorbereitungen class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/setup/>
<b>1. </b>Vorbereitungen
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/setup/requirements/ title=Anforderungen class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/setup/requirements/>
Anforderungen
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/setup/raspberry/ title="Raspberry PI Setup" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/setup/raspberry/>
Raspberry PI Setup
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/setup/intellij/ title="IntelliJ IDEA Setup" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/setup/intellij/>
IntelliJ IDEA Setup
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/ title=Grundlagen class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/>
<b>2. </b>Grundlagen
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/crowpi/ title="Die CrowPi Plattform" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/crowpi/>
Die CrowPi Plattform
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/running/ title="Starten der Applikation" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/running/>
Starten der Applikation
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/debugging/ title="Debugging der Applikation" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/debugging/>
Debugging der Applikation
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/framework/ title="Application Framework" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/framework/>
Application Framework
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/basics/dev-process/ title=Entwicklungsprozess class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/basics/dev-process/>
Entwicklungsprozess
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/ title=Komponenten class="dd-item
parent">
<a href=/CrowPiGoesJavaTutorial/de/components/>
<b>3. </b>Komponenten
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/seven-segment/ title="7-Segment Anzeige" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/seven-segment/>
7-Segment Anzeige
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/button/ title=Button class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/button/>
Button
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/button-matrix/ title="Button Matrix" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/button-matrix/>
Button Matrix
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/buzzer/ title=Buzzer class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/buzzer/>
Buzzer
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/ir-receiver/ title="Infrarot Empfänger" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/ir-receiver/>
Infrarot Empfänger
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/lcd-display/ title="LCD Display" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/lcd-display/>
LCD Display
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/led-matrix/ title="LED Matrix" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/led-matrix/>
LED Matrix
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/light-sensor/ title=Lichtsensor class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/light-sensor/>
Lichtsensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/pir-motion-sensor/ title="PIR Motion Sensor" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/pir-motion-sensor/>
PIR Motion Sensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/relay/ title=Relais class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/relay/>
Relais
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/rfid/ title=RFID class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/rfid/>
RFID
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/step-motor/ title=Schrittmotor class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/step-motor/>
Schrittmotor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/servo-motor/ title=Servomotor class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/servo-motor/>
Servomotor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/sound-sensor/ title="Sound Sensor" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/sound-sensor/>
Sound Sensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/humi-temp-sensor/ title="Temperatur- / Luftfeuchtigkeitssensor" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/humi-temp-sensor/>
Temperatur- / Luftfeuchtigkeitssensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/tilt-sensor/ title="Tilt Sensor" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/tilt-sensor/>
Tilt Sensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/touch-sensor/ title="Touch Sensor" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/touch-sensor/>
Touch Sensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/ultrasonic-sensor/ title="Ultraschall Distanzsensor" class="dd-item active">
<a href=/CrowPiGoesJavaTutorial/de/components/ultrasonic-sensor/>
Ultraschall Distanzsensor
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/components/vibration-motor/ title=Vibrationsmotor class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/components/vibration-motor/>
Vibrationsmotor
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/hardware/ title=Hardware class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/hardware/>
<b>4. </b>Hardware
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/hardware/i2c/ title=I²C class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/hardware/i2c/>
I²C
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/hardware/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/hardware/pwm/>
Pulse Width Modulation (PWM)
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/CrowPiGoesJavaTutorial/de/hardware/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item>
<a href=/CrowPiGoesJavaTutorial/de/hardware/spi/>
Serial Peripheral Interface (SPI)
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
</ul>
<section id=shortcuts>
<h3>Mehr</h3>
<ul>
<li>
<a class=padding href=https://github.com/Pi4J/pi4j-example-crowpi><i class="fab fa-fw fa-github"></i> GitHub Repository (Code)</a>
</li>
<li>
<a class=padding href=https://github.com/FHNW-IP5-IP6/CrowPiGoesJavaTutorial><i class="fab fa-fw fa-github"></i> GitHub Repository (Doku)</a>
</li>
<li>
<a class=padding href=https://www.pi4j.com/><i class="fas fa-fw fa-cogs"></i> Pi4J Website</a>
</li>
<li>
<a class=padding href=https://www.fhnw.ch/en/><i class="fas fa-fw fa-university"></i> FHNW Website</a>
</li>
</ul>
</section>
<section id=prefooter>
<hr>
<ul>
<li>
<a class=padding>
<i class="fas fa-language fa-fw"></i>
<div class=select-style>
<select id=select-language onchange="location=this.value"><option id=de value=https://fhnw-ip5-ip6.github.io/CrowPiGoesJavaTutorial/de/components/ultrasonic-sensor/ selected>German</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg>
</div>
</a>
</li>
<li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Verlauf löschen</a></li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=top-github-link>
<a class=github-link title="Bearbeite diese Seite" href=https://github.com/FHNW-IP5-IP6/CrowPiGoesJavaTutorial/edit/main/content/german/components/ultrasonic-sensor.md target=blank>
<i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Bearbeite diese Seite</span>
</a>
</div>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/CrowPiGoesJavaTutorial/de/>CrowPi goes Java</a> > <a href=/CrowPiGoesJavaTutorial/de/components/>Komponenten</a> > Ultraschall Distanzsensor
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#funktionsweise>Funktionsweise</a></li>
<li><a href=#voraussetzungen>Voraussetzungen</a>
<ul>
<li><a href=#dip-switches>DIP Switches</a></li>
</ul>
</li>
<li><a href=#verwendung>Verwendung</a>
<ul>
<li><a href=#konstruktoren>Konstruktoren</a></li>
<li><a href=#methoden>Methoden</a></li>
</ul>
</li>
<li><a href=#beispielapplikation>Beispielapplikation</a></li>
<li><a href=#weitere-möglichkeiten>Weitere Möglichkeiten</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
<div class=tags>
<a class=tag-link href=/CrowPiGoesJavaTutorial/de/tags/gpio>gpio</a>
</div>
</div>
<div id=body-inner>
<h1>
Ultraschall Distanzsensor
</h1>
<hr>
<h2 id=funktionsweise>Funktionsweise</h2>
<p>Der Ultraschall Distanzsensor misst mithilfe eines akustischen Signals die Distanz zu Objekten. Der Ton liegt dabei im Ultraschallbereich
und ist für den Menschen nicht hörbar. Um das Signal von Umgebungsgeräuschen unterscheiden zu können, wird nicht ein langer Ton, sondern
kurze pulsierendes Töne ausgeben. Beim im CrowPi verbauten Modell <code>HC-SR04</code> handelt es sich dabei 8 einzelne Impulse auf einer Frequenz von
40kHz. Wenn diese Töne nun auf ein Objekt treffen, werden sie reflektiert und zurück Richtung Sensor geworfen. Sobald der Sensor seinen
eigenen Ton wieder hört, schaltet er entsprechend seinen digitalen Ausgang. Zum Starten des Messvorgangs bietet der Sensor zusätzlich einen
digitalen Eingang.</p>
<p>Wenn nun mit einem Programm die Zeit zwischen Aussenden des Tons (Trigger) und dem Wiedereintreffen des Tons gemessen wird kann daraus
mithilfe der Schallgeschwindigkeit die Distanz zum Objekt berechnet werden. Diese Funktion wird von der <code>UltrasonicDistanceSensorComponent</code>
übernommen. Sie liefert direkt einen Messwert in Zentimetern.</p>
<p>Mit dem <code>HC-SR04</code> können Distanzen zwischen von 2 bis 3000 Zentimetern gemessen werden. Dabei ist mit einer Toleranz von etwa 3 Millimetern
zu rechnen. Je nach Messdistanz variiert dieser Wert etwas. Genaueres dazu findet sich im
<a href=https://cdn.sparkfun.com/datasheets/Sensors/Proximity/HCSR04.pdf>Datenblatt</a> des Sensors. Wichtig ist auch zu wissen, dass mehrere
Ultraschallsensoren sich gegenseitig stören können. Weiter ist die Schallgeschwindkeit von der Umgebungstemperatur abhängig. Die Messwerte
können einige Prozent schwanken, wenn es kälter oder wärmer ist.</p>
<h2 id=voraussetzungen>Voraussetzungen</h2>
<h3 id=dip-switches>DIP Switches</h3>
<p>Für diese Komponente werden keine spezifischen DIP-Switches benötigt, so dass diese in der Standardkonfiguration belassen werden können:</p><svg width="164" height="64" viewBox="0 0 51.329 20.034" xmlns="http://www.w3.org/2000/svg" style="margin-right:10px"><g><rect width="51.329" height="20.034" fill="#333" stroke-width=".6835"/><text x="1.0455865" y="4.9884982" fill="#fff" font-family="sans-serif" font-size="4.9389" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><tspan>ON</tspan></text><text x="50.2834135" y="4.9884982" fill="#fff" text-anchor="end" font-family="sans-serif" font-size="4.9389" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><tspan>(links)</tspan></text><g fill="#fff" stroke="#646464" stroke-width=".52084"><rect x="1.3229" y="6.35" width="4.2333" height="8.4667"/><rect x="7.6729" y="6.35" width="4.2333" height="8.4667"/><rect x="14.023" y="6.35" width="4.2333" height="8.4667"/><rect x="20.373" y="6.35" width="4.2333" height="8.4667"/><rect x="26.723" y="6.35" width="4.2333" height="8.4667"/><rect x="33.073" y="6.35" width="4.2333" height="8.4667"/><rect x="39.423" y="6.35" width="4.2333" height="8.4667"/><rect x="45.773" y="6.35" width="4.2333" height="8.4667"/></g><g fill="#646464" stroke-width=".36829"><rect x="1.3229" y="6.35" width="4.2333" height="4.2333"/><rect x="7.6729" y="6.35" width="4.2333" height="4.2333"/><rect x="14.023" y="6.35" width="4.2333" height="4.2333"/><rect x="20.373" y="6.35" width="4.2333" height="4.2333"/><rect x="26.723" y="6.35" width="4.2333" height="4.2333"/><rect x="33.073" y="6.35" width="4.2333" height="4.2333"/><rect x="39.423" y="6.35" width="4.2333" height="4.2333"/><rect x="45.773" y="6.35" width="4.2333" height="4.2333"/></g><g fill="#fff" font-family="sans-serif" font-size="3.5278" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><text x="2.2863367" y="18.711349"><tspan>1</tspan></text><text x="8.6363363" y="18.711349"><tspan>2</tspan></text><text x="14.986337" y="18.711349"><tspan>3</tspan></text><text x="21.336336" y="18.711349"><tspan>4</tspan></text><text x="27.686337" y="18.711349"><tspan>5</tspan></text><text x="34.036335" y="18.711349"><tspan>6</tspan></text><text x="40.386333" y="18.711349"><tspan>7</tspan></text><text x="46.736332" y="18.711349"><tspan>8</tspan></text></g></g></svg><svg width="164" height="64" viewBox="0 0 51.329 20.034" xmlns="http://www.w3.org/2000/svg"><g><rect width="51.329" height="20.034" fill="#333" stroke-width=".6835"/><text x="1.0455865" y="4.9884982" fill="#fff" font-family="sans-serif" font-size="4.9389" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><tspan>ON</tspan></text><text x="50.2834135" y="4.9884982" fill="#fff" text-anchor="end" font-family="sans-serif" font-size="4.9389" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><tspan>(rechts)</tspan></text><g fill="#fff" stroke="#646464" stroke-width=".52084"><rect x="1.3229" y="6.35" width="4.2333" height="8.4667"/><rect x="7.6729" y="6.35" width="4.2333" height="8.4667"/><rect x="14.023" y="6.35" width="4.2333" height="8.4667"/><rect x="20.373" y="6.35" width="4.2333" height="8.4667"/><rect x="26.723" y="6.35" width="4.2333" height="8.4667"/><rect x="33.073" y="6.35" width="4.2333" height="8.4667"/><rect x="39.423" y="6.35" width="4.2333" height="8.4667"/><rect x="45.773" y="6.35" width="4.2333" height="8.4667"/></g><g fill="#646464" stroke-width=".36829"><rect x="1.3229" y="6.35" width="4.2333" height="4.2333"/><rect x="7.6729" y="6.35" width="4.2333" height="4.2333"/><rect x="14.023" y="6.35" width="4.2333" height="4.2333"/><rect x="20.373" y="6.35" width="4.2333" height="4.2333"/><rect x="26.723" y="6.35" width="4.2333" height="4.2333"/><rect x="33.073" y="6.35" width="4.2333" height="4.2333"/><rect x="39.423" y="6.35" width="4.2333" height="4.2333"/><rect x="45.773" y="6.35" width="4.2333" height="4.2333"/></g><g fill="#fff" font-family="sans-serif" font-size="3.5278" font-weight="bold" stroke-width=".26458" style="line-height:1.25"><text x="2.2863367" y="18.711349"><tspan>1</tspan></text><text x="8.6363363" y="18.711349"><tspan>2</tspan></text><text x="14.986337" y="18.711349"><tspan>3</tspan></text><text x="21.336336" y="18.711349"><tspan>4</tspan></text><text x="27.686337" y="18.711349"><tspan>5</tspan></text><text x="34.036335" y="18.711349"><tspan>6</tspan></text><text x="40.386333" y="18.711349"><tspan>7</tspan></text><text x="46.736332" y="18.711349"><tspan>8</tspan></text></g></g></svg>
<h2 id=verwendung>Verwendung</h2>
<p>Nachfolgend wird die Verwendung der Klasse
<code>com.pi4j.crowpi.components.UltrasonicDistanceSensorComponent</code>
<a href=https://pi4j.com/pi4j-example-crowpi/com.pi4j.crowpi/com/pi4j/crowpi/components/UltrasonicDistanceSensorComponent.html target=_blank class="btn btn-default btn-small">
<i class="fas fa-external-link-alt"></i>
Javadoc
</a>
beschrieben.</p>
<h3 id=konstruktoren>Konstruktoren</h3>
<table>
<thead>
<tr>
<th style=text-align:left>Konstruktor</th>
<th style=text-align:left>Bemerkung</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left><code>UltrasonicDistanceSensorComponent(com.pi4j.context.Context pi4j)</code></td>
<td style=text-align:left>Initialisiert einen Ultraschall Distanz Sensor mit dem Standard-Pin für den CrowPi.</td>
</tr>
<tr>
<td style=text-align:left><code>UltrasonicDistanceSensorComponent(com.pi4j.context.Context pi4j, int triggerAddress, int echoAddress)</code></td>
<td style=text-align:left>Initialisiert einen Ultraschall Distanz Sensor mit benutzerdefinierten Pins. Trigger ist dabei der digitale Eingang und Echo der Ausgang des Sensors.</td>
</tr>
</tbody>
</table>
<h3 id=methoden>Methoden</h3>
<table>
<thead>
<tr>
<th style=text-align:left>Methode</th>
<th style=text-align:left>Bemerkung</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left><code>double measure()</code></td>
<td style=text-align:left>Führt eine Messung aus und gibt die aktuelle Distanz [cm] zurück. Nutzt dabei die aktuelle Temperatureinstellung.</td>
</tr>
<tr>
<td style=text-align:left><code>double measure(double temperature)</code></td>
<td style=text-align:left>Führt eine Messung aus und gibt die aktuelle Distanz [cm] zurück. Bei der Distanzberechnung wird zudem der Einfluss der Umgebungstemperatur auf die Schallgeschwindigkeit berücksichtigt und kompensiert.</td>
</tr>
<tr>
<td style=text-align:left><code>void onObjectFound(SimpleEventHandler handler)</code></td>
<td style=text-align:left>Setzt den Event Handler, welcher bei Erkennung eines Objekts aufgerufen werden soll. <code>null</code> deaktiviert diesen Event Listener.</td>
</tr>
<tr>
<td style=text-align:left><code>void onObjectDisappeared(SimpleEventHandler handler)</code></td>
<td style=text-align:left>Setzt den Event Handler, welcher bei Verschwinden eines Objekts aufgerufen werden soll. <code>null</code> deaktiviert diesen Event Listener.</td>
</tr>
<tr>
<td style=text-align:left><code>void setMeasurementTemperature(double temperature)</code></td>
<td style=text-align:left>Definiert die Standardmesstemperatur, welche in die Distanzberechnung einbezogen wird.</td>
</tr>
<tr>
<td style=text-align:left><code>void setDetectionRange(double minRange, double maxRange)</code></td>
<td style=text-align:left>Definiert die Distanz welche gemessen werden muss, um als Objekt erkannt zu werden.</td>
</tr>
</tbody>
</table>
<h2 id=beispielapplikation>Beispielapplikation</h2>
<p>Die nachfolgende Beispielapplikation führt als erstes unter Verwendung von <code>onObjectFound</code> eine Objekterkennung durch. Es wird jeweils
ausgegeben, ob ein Objekt gefunden wurde und ebenfalls, wenn es wieder verschwunden ist. Danach werden einige Messwerte mit verschiedenen
Temperatureinstellungen ausgegeben. So kann der Einfluss von Temperaturschwankungen auf den Messwert hervorragend analysiert werden.
Anschliessend wird eine kurze <code>for</code>-Schleife gestartet welche jede Sekunde einen neuen Messwert ausgibt. Dies verschafft etwas Zeit, um auch
einmal die Hand über den Sensor zu halten.</p>
<div class=cpi-code-header>
<div>
<strong>Pfad zum Codebeispiel: </strong>
<code>src/main/java/com/pi4j/crowpi/applications/UltrasonicDistanceSensorApp.java</code>
</div>
<a href=https://github.com/Pi4J/pi4j-example-crowpi/blob/main/src/main/java/com/pi4j/crowpi/applications/UltrasonicDistanceSensorApp.java target=_blank class="btn btn-default">
<i class="fab fa-github"></i>
Auf GitHub ansehen
</a>
</div>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> com.pi4j.crowpi.applications<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> com.pi4j.context.Context<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.crowpi.Application<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.crowpi.components.UltrasonicDistanceSensorComponent<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.crowpi.components.exceptions.MeasurementException<span style=color:#f92672>;</span>

<span style=color:#75715e>/**
</span><span style=color:#75715e> * Example Application of using the Crow Pi Ultrasonic Distance Sensor.
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UltrasonicDistanceSensorApp</span> <span style=color:#66d9ef>implements</span> Application <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>Context pi4j<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// Create new tilt sensor component
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> var distanceSensor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UltrasonicDistanceSensorComponent<span style=color:#f92672>(</span>pi4j<span style=color:#f92672>);</span>

        <span style=color:#75715e>// Configures the Sensor to find Object passing in a predefined distance
</span><span style=color:#75715e></span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Searching for an object now...&#34;</span><span style=color:#f92672>);</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>setDetectionRange</span><span style=color:#f92672>(</span>5<span style=color:#f92672>,</span>50<span style=color:#f92672>);</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>setMeasurementTemperature</span><span style=color:#f92672>(</span>23<span style=color:#f92672>);</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>onObjectFound</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Sensor has found a Object in Range!&#34;</span><span style=color:#f92672>));</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>onObjectDisappeared</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Found Object disappeared!&#34;</span><span style=color:#f92672>));</span>
        sleep<span style=color:#f92672>(</span>10000<span style=color:#f92672>);</span>

        <span style=color:#75715e>// Clean up event handlers
</span><span style=color:#75715e></span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Searching completed.&#34;</span><span style=color:#f92672>);</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>onObjectFound</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
        distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>onObjectDisappeared</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>

        <span style=color:#75715e>// Just printing some text to the users
</span><span style=color:#75715e></span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Let&#39;s find out the impact of temperature to ultrasonic measurements!&#34;</span><span style=color:#f92672>);</span>

        <span style=color:#75715e>// Start a measurement with a temperature compensation like it is -10°C while measuring.
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> measurementCold <span style=color:#f92672>=</span> distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>measure</span><span style=color:#f92672>(-</span>10<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;If you room has -10°C now we measure: &#34;</span> <span style=color:#f92672>+</span> measurementCold <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; cm&#34;</span><span style=color:#f92672>);</span>

        <span style=color:#75715e>// Start a measurement with a temperature compensation like it is 30°C while measuring.
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span> measurementHot <span style=color:#f92672>=</span> distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>measure</span><span style=color:#f92672>(</span>30<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;If you room has 30°C now we measure: &#34;</span> <span style=color:#f92672>+</span> measurementHot <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; cm&#34;</span><span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;That&#39;s a difference of %.2f %%. Only caused by the difference of sonics. Physic is &#34;</span> <span style=color:#f92672>+</span>
            <span style=color:#e6db74>&#34;crazy\n&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>(</span>measurementHot <span style=color:#f92672>-</span> measurementCold<span style=color:#f92672>)</span> <span style=color:#f92672>/</span> measurementCold <span style=color:#f92672>*</span> 100<span style=color:#f92672>);</span>

        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Lets now just measure for 10 Seconds. That gives some time to try the sensor a little.&#34;</span><span style=color:#f92672>);</span>

        <span style=color:#75715e>// Loop 10 times through the measurement. Print the result to the user
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 10<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// Measures the current distance without temperature compensation and prints it to the user.
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Measured distance is: &#34;</span> <span style=color:#f92672>+</span> distanceSensor<span style=color:#f92672>.</span><span style=color:#a6e22e>measure</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; cm&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>MeasurementException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#75715e>// If the measurement fails with a MeasurementException, we inform the user and try again next time
</span><span style=color:#75715e></span>                System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Oh no. Measurement failed... lets try again&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>

            <span style=color:#75715e>// Delay the measurements a little. This gives you some time to move in front of the sensor.
</span><span style=color:#75715e></span>            sleep<span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div>
<h2 id=weitere-möglichkeiten>Weitere Möglichkeiten</h2>
<ul>
<li>Das Beispiel um einen Temperatursensor erweitern, um immer korrekte Messwerte zu erhalten.</li>
</ul>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/CrowPiGoesJavaTutorial/de/components/touch-sensor/ title="Touch Sensor"> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/CrowPiGoesJavaTutorial/de/components/vibration-motor/ title=Vibrationsmotor style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/CrowPiGoesJavaTutorial/js/clipboard.min.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/perfect-scrollbar.min.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/perfect-scrollbar.jquery.min.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/jquery.sticky.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/featherlight.min.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/highlight.pack.js?1622398519></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/CrowPiGoesJavaTutorial/js/modernizr.custom-3.6.0.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/learn.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/js/hugo-learn.js?1622398519></script>
<script src=/CrowPiGoesJavaTutorial/mermaid/mermaid.js?1622398519></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body>
</html>